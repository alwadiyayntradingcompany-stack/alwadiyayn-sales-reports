<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù… - ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
        }
        
        .test-section.success {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
        }
        
        .test-section.error {
            border-color: #f44336;
            background: rgba(244, 67, 54, 0.1);
        }
        
        .test-section.warning {
            border-color: #ff9800;
            background: rgba(255, 152, 0, 0.1);
        }
        
        .test-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .test-result {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            white-space: pre-wrap;
        }
        
        .success-result {
            background: #e8f5e8;
            color: #2e7d32;
            border: 1px solid #4caf50;
        }
        
        .error-result {
            background: #ffebee;
            color: #c62828;
            border: 1px solid #f44336;
        }
        
        .info-result {
            background: #e3f2fd;
            color: #1565c0;
            border: 1px solid #2196f3;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 10px;
        }
        
        .status-success { background: #4CAF50; }
        .status-error { background: #f44336; }
        .status-warning { background: #ff9800; }
        .status-info { background: #2196f3; }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¸Ø§Ù… ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h1>
            <p>Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ù…ÙŠØ¹ ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ù…Ù„Ù‡Ø§ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­</p>
        </div>

        <!-- Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Google Apps Script -->
        <div class="test-section" id="connectionTest">
            <h3>ğŸŒ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Google Apps Script</h3>
            <p>ÙŠØ®ØªØ¨Ø± Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ø¹ Ø§Ù„Ø®Ø§Ø¯Ù… ÙˆØ§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ù…Ù„ API</p>
            <button class="test-button" onclick="testConnection()">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„</button>
            <div class="test-result" id="connectionResult"></div>
        </div>

        <!-- Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
        <div class="test-section" id="dataTest">
            <h3>ğŸ“Š Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
            <p>ÙŠØ®ØªØ¨Ø± Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¥Ù„Ù‰ Google Sheets</p>
            <button class="test-button" onclick="testDataSubmission()">Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©</button>
            <div class="test-result" id="dataResult"></div>
        </div>

        <!-- Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„ÙŠ -->
        <div class="test-section" id="localStorageTest">
            <h3>ğŸ’¾ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„ÙŠ</h3>
            <p>ÙŠØ®ØªØ¨Ø± Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ù†Ø¸Ø§Ù… Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ø§Ù„Ù…Ø­Ù„ÙŠ</p>
            <button class="test-button" onclick="testLocalStorage()">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„ÙŠ</button>
            <button class="test-button" onclick="viewLocalData()">Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©</button>
            <button class="test-button" onclick="clearLocalData()">Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©</button>
            <div class="test-result" id="localStorageResult"></div>
        </div>

        <!-- Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ -->
        <div class="test-section" id="hijriDateTest">
            <h3>ğŸ“… Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</h3>
            <p>ÙŠØ®ØªØ¨Ø± Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</p>
            <button class="test-button" onclick="testHijriDate()">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ</button>
            <div class="test-result" id="hijriDateResult"></div>
        </div>

        <!-- Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© -->
        <div class="test-section" id="syncTest">
            <h3>ğŸ”„ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©</h3>
            <p>ÙŠØ®ØªØ¨Ø± Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ù†Ø¸Ø§Ù… Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ù…Ø­Ù„ÙŠØ§Ù‹</p>
            <button class="test-button" onclick="testSync()">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©</button>
            <div class="test-result" id="syncResult"></div>
        </div>

        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… -->
        <div class="test-section" id="systemInfo">
            <h3>â„¹ï¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
            <p>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„Ù…ØªØµÙØ­</p>
            <button class="test-button" onclick="getSystemInfo()">Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</button>
            <div class="test-result" id="systemInfoResult"></div>
        </div>

        <!-- Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ø§Ù…Ø© -->
        <div class="test-section" id="overallStatus">
            <h3>ğŸ“ˆ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ù†Ø¸Ø§Ù…</h3>
            <div id="statusSummary">
                <p>ğŸ”— Ø§Ù„Ø§ØªØµØ§Ù„: <span class="status-indicator status-info" id="connectionStatus"></span> <span id="connectionStatusText">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</span></p>
                <p>ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ: <span class="status-indicator status-info" id="hijriStatus"></span> <span id="hijriStatusText">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</span></p>
                <p>ğŸ“Š Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: <span class="status-indicator status-info" id="dataStatus"></span> <span id="dataStatusText">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</span></p>
                <p>ğŸ’¾ Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„ÙŠ: <span class="status-indicator status-info" id="localStatus"></span> <span id="localStatusText">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</span></p>
                <p>ğŸ”„ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©: <span class="status-indicator status-info" id="syncStatus"></span> <span id="syncStatusText">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</span></p>
            </div>
        </div>
    </div>

    <script>
        // URL Ø§Ù„Ø®Ø§Øµ Ø¨Ù€ Google Apps Script - Ù…Ø­Ø¯Ø« ÙˆØµØ­ÙŠØ­
        const GOOGLE_APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzKvQxGzJBB_0szSrmQRQckGtEpNr1MzQQe8Fi3mbfgp5dffQW66Jc9NT-vDBsEwE5qDi5SvA/exec';

        // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„
        function testConnection() {
            const resultDiv = document.getElementById('connectionResult');
            resultDiv.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„...';
            resultDiv.className = 'test-result info-result';

            fetch(GOOGLE_APPS_SCRIPT_URL, {
                method: 'GET'
            })
            .then(response => response.text())
            .then(data => {
                resultDiv.textContent = `âœ… Ù†Ø¬Ø­ Ø§Ù„Ø§ØªØµØ§Ù„!\nØ§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©: ${data}`;
                resultDiv.className = 'test-result success-result';
                updateStatus('connection', 'success', 'Ù…ØªØµÙ„');
            })
            .catch(error => {
                resultDiv.textContent = `âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„!\nØ§Ù„Ø®Ø·Ø£: ${error.message}`;
                resultDiv.className = 'test-result error-result';
                updateStatus('connection', 'error', 'ØºÙŠØ± Ù…ØªØµÙ„');
            });
        }

        // Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function testDataSubmission() {
            const resultDiv = document.getElementById('dataResult');
            resultDiv.textContent = 'Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©...';
            resultDiv.className = 'test-result info-result';

            const testData = {
                'Ø§Ù„ØªØ§Ø±ÙŠØ® (Ù…ÙŠÙ„Ø§Ø¯ÙŠ / Gregorian Date / à¦—à§à¦°à§‡à¦—à¦°à¦¿à¦¯à¦¼à¦¾à¦¨ à¦¤à¦¾à¦°à¦¿à¦–)': new Date().toISOString().split('T')[0],
                'Ø§Ù„ØªØ§Ø±ÙŠØ® (Ù‡Ø¬Ø±ÙŠ / Hijri Date / à¦¹à¦¿à¦œà¦°à¦¿ à¦¤à¦¾à¦°à¦¿à¦–)': '15-06-1446',
                'Ø¥Ø³Ù… Ø§Ù„Ù…Ø¤Ø³Ø³Ø© / Organization Name / à¦ªà§à¦°à¦¤à¦¿à¦·à§à¦ à¦¾à¦¨à§‡à¦° à¦¨à¦¾à¦®': 'Ø´Ø±ÙƒØ© Ø§Ù„ÙˆØ§Ø¯ÙŠ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ© - Ø§Ø®ØªØ¨Ø§Ø±',
                'Ø§Ù„ÙØ±Ø¹ / Ø§Ù„Ù…ÙˆÙ‚Ø¹ / Branch / Location / à¦¶à¦¾à¦–à¦¾ / à¦…à¦¬à¦¸à§à¦¥à¦¾à¦¨': 'Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ - Ø§Ø®ØªØ¨Ø§Ø±',
                'Ø§Ù„Ù…Ø³Ø¦ÙˆÙ„ / Responsible Person / à¦¦à¦¾à¦¯à¦¼à¦¿à¦¤à§à¦¬à¦¶à§€à¦² à¦¬à§à¦¯à¦•à§à¦¤à¦¿': 'Ù…Ø¯ÙŠØ± Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±',
                'Ø§Ø³Ù… Ù…Ø§ÙƒÙŠÙ†Ø© Ø§Ù„Ø¨ÙŠØ¹ / Sales Machine Name / à¦¬à¦¿à¦•à§à¦°à¦¯à¦¼ à¦®à§‡à¦¶à¦¿à¦¨ à¦¨à¦¾à¦®': 'Ù…Ø§ÙƒÙŠÙ†Ø© Ø§Ø®ØªØ¨Ø§Ø± 1',
                'Ø±Ù‚Ù… Ù…Ø§ÙƒÙŠÙ†Ø© Ø§Ù„Ø¨ÙŠØ¹ : Sales Machine Number / à¦¬à¦¿à¦•à§à¦°à¦¯à¦¼ à¦®à§‡à¦¶à¦¿à¦¨ à¦¨à¦®à§à¦¬à¦°': 'TEST001',
                'ÙƒØ§Ø´ / Cash / à¦¨à¦—à¦¦': 1000,
                'Ù†Ø¸Ø§Ù… Ù†Ù‚Ø§Ø· Ø§Ù„Ø¨ÙŠØ¹ / Point of Sale System / à¦ªà¦¯à¦¼à§‡à¦¨à§à¦Ÿ à¦…à¦« à¦¸à§‡à¦² à¦¸à¦¿à¦¸à§à¦Ÿà§‡à¦®': 500,
                'Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ© / Daily Purchases / à¦¦à§ˆà¦¨à¦¿à¦• à¦•à§à¦°à¦¯à¦¼': 200,
                'Ù…Ø³Ø­ÙˆØ¨Ø§Øª Ù…Ø§Ù„ÙŠØ© Ø£Ø®Ø±Ù‰ Ù…Ù† Ø§Ù„ÙØ±Ø¹ / Other Financial Withdrawals from Branch / à¦¶à¦¾à¦–à¦¾ à¦¥à§‡à¦•à§‡ à¦…à¦¨à§à¦¯à¦¾à¦¨à§à¦¯ à¦†à¦°à§à¦¥à¦¿à¦• à¦‰à¦¤à§à¦¤à§‹à¦²à¦¨': 100,
                'Ø§Ø³Ù… Ø§Ù„Ù‚Ø§Ø¦Ù… Ø¨Ø³Ø­Ø¨ Ø§Ù„Ù…Ø¨Ù„Øº Ù…Ù† Ø§Ù„ÙØ±Ø¹ / Name of Person Withdrawing Amount / à¦¶à¦¾à¦–à¦¾ à¦¥à§‡à¦•à§‡ à¦Ÿà¦¾à¦•à¦¾ à¦‰à¦¤à§à¦¤à§‹à¦²à¦¨à¦•à¦¾à¦°à§€à¦° à¦¨à¦¾à¦®': 'Ù…ÙˆØ¸Ù Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±',
                files: [],
                id: 'test_' + Date.now(),
                status: 'test'
            };

            fetch(GOOGLE_APPS_SCRIPT_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(testData)
            })
            .then(response => response.text())
            .then(data => {
                resultDiv.textContent = `âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!\nØ§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©: ${data}`;
                resultDiv.className = 'test-result success-result';
                updateStatus('data', 'success', 'ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­');
            })
            .catch(error => {
                resultDiv.textContent = `âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!\nØ§Ù„Ø®Ø·Ø£: ${error.message}`;
                resultDiv.className = 'test-result error-result';
                updateStatus('data', 'error', 'Ù„Ø§ ÙŠØ¹Ù…Ù„');
            });
        }

        // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„ÙŠ
        function testLocalStorage() {
            const resultDiv = document.getElementById('localStorageResult');
            
            try {
                const testData = {
                    id: 'test_local_' + Date.now(),
                    timestamp: new Date().toISOString(),
                    data: 'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„ÙŠ'
                };

                localStorage.setItem('testData', JSON.stringify(testData));
                const retrieved = JSON.parse(localStorage.getItem('testData'));

                if (retrieved && retrieved.id === testData.id) {
                    resultDiv.textContent = `âœ… Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„ÙŠ ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­!\nØªÙ… Ø­ÙØ¸ ÙˆØ§Ø³ØªØ±Ø¬Ø§Ø¹: ${JSON.stringify(testData, null, 2)}`;
                    resultDiv.className = 'test-result success-result';
                    updateStatus('local', 'success', 'ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­');
                } else {
                    throw new Error('ÙØ´Ù„ ÙÙŠ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
                }
            } catch (error) {
                resultDiv.textContent = `âŒ ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„ÙŠ!\nØ§Ù„Ø®Ø·Ø£: ${error.message}`;
                resultDiv.className = 'test-result error-result';
                updateStatus('local', 'error', 'Ù„Ø§ ÙŠØ¹Ù…Ù„');
            }
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©
        function viewLocalData() {
            const resultDiv = document.getElementById('localStorageResult');
            
            const submissions = localStorage.getItem('offlineSubmissions');
            const backups = localStorage.getItem('submissionBackups');
            const successful = localStorage.getItem('successfulSubmissions');

            let output = 'Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ù…Ø­Ù„ÙŠØ§Ù‹:\n\n';
            output += `ğŸ“¤ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø¤Ø¬Ù„Ø©: ${submissions ? JSON.parse(submissions).length : 0}\n`;
            output += `ğŸ’¾ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©: ${backups ? JSON.parse(backups).length : 0}\n`;
            output += `âœ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„Ø§Øª Ø§Ù„Ù†Ø§Ø¬Ø­Ø©: ${successful ? JSON.parse(successful).length : 0}\n\n`;

            if (submissions) {
                output += 'ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø¤Ø¬Ù„Ø©:\n';
                output += JSON.stringify(JSON.parse(submissions), null, 2);
            }

            resultDiv.textContent = output;
            resultDiv.className = 'test-result info-result';
        }

        // Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©
        function clearLocalData() {
            const resultDiv = document.getElementById('localStorageResult');
            
            try {
                localStorage.removeItem('offlineSubmissions');
                localStorage.removeItem('submissionBackups');
                localStorage.removeItem('successfulSubmissions');
                localStorage.removeItem('formData');
                localStorage.removeItem('testData');

                resultDiv.textContent = 'âœ… ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!';
                resultDiv.className = 'test-result success-result';
            } catch (error) {
                resultDiv.textContent = `âŒ ÙØ´Ù„ ÙÙŠ Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!\nØ§Ù„Ø®Ø·Ø£: ${error.message}`;
                resultDiv.className = 'test-result error-result';
            }
        }

        // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
        function testHijriDate() {
            const resultDiv = document.getElementById('hijriDateResult');
            
            try {
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø¯Ø§Ù„Ø© ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ Ø§Ù„Ù…Ø­Ø³Ù†Ø©
                function getCurrentHijriDate() {
                    const today = new Date();
                    
                    // Ø§Ø³ØªØ®Ø¯Ø§Ù… Intl.DateTimeFormat Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ Ø§Ù„Ø¯Ù‚ÙŠÙ‚
                    try {
                        const hijriFormatter = new Intl.DateTimeFormat('ar-SA-u-ca-islamic', {
                            year: 'numeric',
                            month: '2-digit', 
                            day: '2-digit'
                        });
                        
                        const hijriParts = hijriFormatter.formatToParts(today);
                        const year = parseInt(hijriParts.find(part => part.type === 'year').value);
                        const month = parseInt(hijriParts.find(part => part.type === 'month').value);
                        const day = parseInt(hijriParts.find(part => part.type === 'day').value);
                        
                        return { year, month, day };
                    } catch (error) {
                        console.log('ÙØ´Ù„ ÙÙŠ Ø§Ø³ØªØ®Ø¯Ø§Ù… IntlØŒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø©');
                        
                        // Ø·Ø±ÙŠÙ‚Ø© Ø¨Ø¯ÙŠÙ„Ø© Ù…Ø­Ø³Ù†Ø©
                        const gYear = today.getFullYear();
                        const gMonth = today.getMonth() + 1;
                        const gDay = today.getDate();
                        
                        // Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© ØªØ­ÙˆÙŠÙ„ Ù…Ø­Ø³Ù†Ø© ÙˆÙ…ØµØ­Ø­Ø©
                        const a = Math.floor((14 - gMonth) / 12);
                        const y = gYear - a;
                        const m = gMonth + 12 * a - 3;
                        
                        let jd = gDay + Math.floor((153 * m + 2) / 5) + 365 * y + Math.floor(y / 4) - Math.floor(y / 100) + Math.floor(y / 400) - 32045;
                        
                        // ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ
                        jd = jd - 1948084; // ØªØ¹Ø¯ÙŠÙ„ Ù„Ù„ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ù‡Ø¬Ø±ÙŠ
                        
                        const hYear = Math.floor((30 * jd + 10646) / 10631);
                        let hMonth = Math.ceil((jd - 29 - 354 * hYear - Math.floor((3 + 11 * hYear) / 30)) / 29.5);
                        if (hMonth < 1) hMonth = 1;
                        if (hMonth > 12) hMonth = 12;
                        
                        let hDay = jd - 354 * hYear - Math.floor((3 + 11 * hYear) / 30) - Math.floor((hMonth - 1) * 29.5) + 1;
                        if (hDay < 1) hDay = 1;
                        if (hDay > 30) hDay = 30;
                        
                        // Ø¶Ù…Ø§Ù† Ø£Ù† Ø§Ù„ØªØ§Ø±ÙŠØ® Ù…Ù†Ø·Ù‚ÙŠ
                        const currentHijriYear = 1446; // Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ù‡Ø¬Ø±ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ© ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹
                        const finalYear = Math.max(currentHijriYear, Math.min(currentHijriYear + 1, Math.floor(hYear)));
                        
                        return {
                            year: finalYear,
                            month: Math.max(1, Math.min(12, Math.floor(hMonth))),
                            day: Math.max(1, Math.min(30, Math.floor(hDay)))
                        };
                    }
                }
                
                const today = new Date();
                const gregorianDate = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
                
                const hijriDate = getCurrentHijriDate();
                const hijriFormatted = `${String(hijriDate.day).padStart(2, '0')}-${String(hijriDate.month).padStart(2, '0')}-${hijriDate.year}`;
                
                const hijriMonths = [
                    'Ù…Ø­Ø±Ù…', 'ØµÙØ±', 'Ø±Ø¨ÙŠØ¹ Ø§Ù„Ø£ÙˆÙ„', 'Ø±Ø¨ÙŠØ¹ Ø§Ù„Ø«Ø§Ù†ÙŠ', 'Ø¬Ù…Ø§Ø¯Ù‰ Ø§Ù„Ø£ÙˆÙ„Ù‰', 'Ø¬Ù…Ø§Ø¯Ù‰ Ø§Ù„Ø«Ø§Ù†ÙŠØ©',
                    'Ø±Ø¬Ø¨', 'Ø´Ø¹Ø¨Ø§Ù†', 'Ø±Ù…Ø¶Ø§Ù†', 'Ø´ÙˆØ§Ù„', 'Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø©', 'Ø°Ùˆ Ø§Ù„Ø­Ø¬Ø©'
                ];
                
                const monthName = hijriMonths[hijriDate.month - 1] || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                
                let output = 'âœ… ØªØ¹Ù…Ù„ Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­!\n\n';
                output += `ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ: ${gregorianDate}\n`;
                output += `ğŸŒ™ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ: ${hijriFormatted}\n`;
                output += `ğŸ“† Ø§Ù„Ø´Ù‡Ø±: ${monthName}\n`;
                output += `ğŸ—“ï¸ Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ù‡Ø¬Ø±ÙŠØ©: ${hijriDate.year} Ù‡Ù€`;
                
                resultDiv.textContent = output;
                resultDiv.className = 'test-result success-result';
                
            } catch (error) {
                resultDiv.textContent = `âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ!\nØ§Ù„Ø®Ø·Ø£: ${error.message}`;
                resultDiv.className = 'test-result error-result';
            }
        }

        function testSync() {
            const resultDiv = document.getElementById('syncResult');
            resultDiv.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©...';
            resultDiv.className = 'test-result info-result';
            
            try {
                const testData = {
                    id: 'sync_test_' + Date.now(),
                    status: 'pending_sync',
                    timestamp: new Date().toISOString()
                };
                
                let offlineData = JSON.parse(localStorage.getItem('offlineSubmissions') || '[]');
                offlineData.push(testData);
                localStorage.setItem('offlineSubmissions', JSON.stringify(offlineData));
                
                resultDiv.textContent = 'âœ… Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ù†Ø§Ø¬Ø­!\nØªÙ… Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù„Ù…Ø²Ø§Ù…Ù†Ø©.';
                resultDiv.className = 'test-result success-result';
                updateStatus('sync', 'success', 'ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­');
                
            } catch (error) {
                resultDiv.textContent = `âŒ ÙØ´Ù„ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©!\nØ§Ù„Ø®Ø·Ø£: ${error.message}`;
                resultDiv.className = 'test-result error-result';
                updateStatus('sync', 'error', 'Ù„Ø§ ÙŠØ¹Ù…Ù„');
            }
        }
        function testSync() {
            const resultDiv = document.getElementById('syncResult');
            resultDiv.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©...';
            resultDiv.className = 'test-result info-result';

            // Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù„Ù…Ø²Ø§Ù…Ù†Ø©
            const testSubmission = {
                id: 'sync_test_' + Date.now(),
                status: 'pending_sync',
                timestamp: new Date().toISOString(),
                'Ø§Ù„ØªØ§Ø±ÙŠØ® (Ù…ÙŠÙ„Ø§Ø¯ÙŠ / Gregorian Date / à¦—à§à¦°à§‡à¦—à¦°à¦¿à¦¯à¦¼à¦¾à¦¨ à¦¤à¦¾à¦°à¦¿à¦–)': new Date().toISOString().split('T')[0],
                'Ø¥Ø³Ù… Ø§Ù„Ù…Ø¤Ø³Ø³Ø© / Organization Name / à¦ªà§à¦°à¦¤à¦¿à¦·à§à¦ à¦¾à¦¨à§‡à¦° à¦¨à¦¾à¦®': 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©'
            };

            // Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¤Ø¬Ù„Ø©
            let offlineSubmissions = JSON.parse(localStorage.getItem('offlineSubmissions') || '[]');
            offlineSubmissions.push(testSubmission);
            localStorage.setItem('offlineSubmissions', JSON.stringify(offlineSubmissions));

            // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©
            if (typeof syncOfflineData === 'function') {
                syncOfflineData();
                
                setTimeout(() => {
                    const updatedSubmissions = JSON.parse(localStorage.getItem('offlineSubmissions') || '[]');
                    const syncedSubmission = updatedSubmissions.find(s => s.id === testSubmission.id);
                    
                    if (syncedSubmission && syncedSubmission.status === 'synced') {
                        resultDiv.textContent = 'âœ… Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­!\nØªÙ… Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­.';
                        resultDiv.className = 'test-result success-result';
                        updateStatus('sync', 'success', 'ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­');
                    } else {
                        resultDiv.textContent = 'âš ï¸ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ù‚ÙŠØ¯ Ø§Ù„ØªÙ‚Ø¯Ù…...\nÙ‚Ø¯ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ÙˆÙ‚Øª Ø£Ø·ÙˆÙ„ Ø£Ùˆ Ø§ØªØµØ§Ù„ Ø£ÙØ¶Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.';
                        resultDiv.className = 'test-result info-result';
                        updateStatus('sync', 'warning', 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©');
                    }
                }, 5000);
            } else {
                resultDiv.textContent = 'âŒ Ø¯Ø§Ù„Ø© Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©!\nØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù ALWADIYAYNFORM.js';
                resultDiv.className = 'test-result error-result';
                updateStatus('sync', 'error', 'ØºÙŠØ± Ù…ØªÙˆÙØ±');
            }
        }

        // Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
        function getSystemInfo() {
            const resultDiv = document.getElementById('systemInfoResult');
            
            const info = {
                userAgent: navigator.userAgent,
                language: navigator.language,
                platform: navigator.platform,
                cookieEnabled: navigator.cookieEnabled,
                onLine: navigator.onLine,
                localStorage: typeof(Storage) !== "undefined",
                sessionStorage: typeof(sessionStorage) !== "undefined",
                indexedDB: typeof(indexedDB) !== "undefined",
                currentTime: new Date().toISOString(),
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                screenResolution: `${screen.width}x${screen.height}`,
                windowSize: `${window.innerWidth}x${window.innerHeight}`
            };

            resultDiv.textContent = JSON.stringify(info, null, 2);
            resultDiv.className = 'test-result info-result';
        }

        // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
        function updateStatus(type, status, text) {
            const statusElement = document.getElementById(type + 'Status');
            const textElement = document.getElementById(type + 'StatusText');
            
            statusElement.className = `status-indicator status-${status}`;
            textElement.textContent = text;
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('load', () => {
            console.log('ğŸ§ª ØµÙØ­Ø© Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø²Ø©');
            
            // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
            setTimeout(() => {
                testLocalStorage();
            }, 1000);
            
            // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
            setTimeout(() => {
                testHijriDate();
            }, 2000);
        });
    </script>
</body>
</html>